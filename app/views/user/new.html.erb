<h1><%= t 'user.new.heading' %></h1>

<% if Acl.find_by_address(request.remote_ip, :conditions => {:k => "no_account_creation"}) %>

<p><%= t 'user.new.no_auto_account_create' %>
</p>

<p><%= t 'user.new.contact_webmaster' %>
</p>

<% else %>

<p><%= t 'user.new.fill_form' %>
</p>

<p><%= t 'user.new.license_agreement' %>
</p>

<%= error_messages_for 'user' %>

<% form_tag :action => 'save' do %>
<%= hidden_field_tag('referer', h(params[:referer])) unless params[:referer].nil? %>
<table id="signupForm">
  <tr><td class="fieldName"><%= t 'user.new.email address' %></td><td><%= text_field('user', 'email',{:size => 50, :maxlength => 255, :tabindex => 1, :value => @email}) %></td></tr>
  <tr><td class="fieldName"><%= t 'user.new.confirm email address' %></td><td><%= text_field('user', 'email_confirmation',{:size => 50, :maxlength => 255, :tabindex => 2}) %></td></tr>
  <tr><td></td><td><span class="minorNote"><%= t 'user.new.not displayed publicly' %></span></td></tr>
  <tr><td colspan="2">&nbsp;<!--vertical spacer--></td></tr>
  <tr><td class="fieldName"><%= t 'user.new.display name' %></td><td><%= text_field('user', 'display_name',{:size => 30, :maxlength => 255, :tabindex => 3, :value => @nickname}) %></td></tr>
  <tr><td></td><td><span class="minorNote"><%= t 'user.new.display name description' %></span></td></tr>
  <tr><td colspan="2">&nbsp;<!--vertical spacer--></td></tr>
  <tr><td class="fieldName"><%= t 'user.new.password' %></td><td><%= password_field('user', 'pass_crypt',{:size => 30, :maxlength => 255, :tabindex => 4}) %></td></tr>
  <tr><td class="fieldName"><%= t 'user.new.confirm password' %></td><td><%= password_field('user', 'pass_crypt_confirmation',{:size => 30, :maxlength => 255, :tabindex => 5}) %></td></tr>
  <tr><td colspan="2">&nbsp;<!--vertical spacer--></td></tr>
  <% if @openID %>
    <tr id="openid-url"><td class="fieldName"><%= t 'user.new.openID' %></td><td><%= text_field('user', 'openid_url',{:size => 50, :maxlength => 255, :tabindex => 6, :value => @openID, :class => "openid_url"}) %></td></tr>
    <tr id="openid-note"><td></td><td><span class="minorNote"><%= t 'user.new.openID description' %></span></td></tr>
  <% else %>
    <tr id="openid-prompt"><td></td><td><span class="minorNote"><%= link_to_function(t 'user.new.openID associate') { |page| page.hide 'openid-prompt'; page.show 'openid-url', 'openid-note', 'openid-note-2' } %></span></td></tr>
    <tr id="openid-url" style="display: none"><td class="fieldName"><%= t 'user.new.openID' %></td><td><%= text_field('user', 'openid_url',{:size => 50, :maxlength => 255, :tabindex => 6, :value => @openID, :class => "openid_url"}) %></td></tr>
    <tr id="openid-note" style="display: none"><td></td><td><span class="minorNote"><%= t 'user.new.openID description' %></span></td></tr>
    <tr id="openid-note-2" style="display: none"><td></td><td><span class="minorNote"><%= t 'user.new.openID nopassword' %></span></td></tr>   
  <% end %>
  <tr><td colspan="2" >&nbsp;<!--vertical spacer--></td></tr>
  <tr><td></td><td align="right"><input type="submit" value="<%= t'user.new.signup' %>" tabindex="7"></td></tr>
</table>
<% end %>

<%= javascript_include_tag 'https://ethnio.com/remotes/62786' %>

<% end %>
